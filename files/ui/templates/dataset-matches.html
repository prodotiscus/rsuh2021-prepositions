<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>Вхождения датасета {{dataset_name}}</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>

    <script>
      var datasetName = "{{dataset_name}}";
    </script>

    <style>
      .main {
        margin-left: 30px;
        margin-right: 30px;
      }
    </style>
  </head>

  <body>
    <div class="main">
      <div class="btn-group" role="group" aria-label="Navigation buttons">
        <a href="/dataset-profile/{{dataset_name}}" class="btn btn-default">&lt;&lt; К профилю</a>
        <a href="/datasets" class="btn btn-default">Список</a>
        <a href="/about" class="btn btn-default">О проекте</a>
      </div>

      <div class="page-header">
        <h3>Список выбранных вхождений для {{dataset_name}}</h3>
      </div>
      <table id="matches_table" class="display">
        <thead>
            <tr>
                <th>Текст</th>
                <th>Источник</th>
                <th>В НКРЯ</th>
                <th>Позиция</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>

    <script>
      $(function() {
        $.getJSON("datasets-json/" + datasetName, function (res) {
          var tableForm = [];
          for (var matchItem of res.data) {
            tableForm.push([
              matchItem.text,
              matchItem.title,
              matchItem.link,
              matchItem.on_corpus_page
            ])
          }
          tbl = $("#matches_table").DataTable({
            columnDefs: {
              width: "20%",
              targets: 0
            },
            data: tableForm
          });
        });
      });
    </script>
  </body>
</html>
